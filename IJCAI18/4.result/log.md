## 3-22

- 线下：
  - 去掉训练集重复值、处理缺失值（删除样本+均值或众数填充）、onehot处理f2/f11/f13、转换时间数据
- 线上：
  - onehot处理f2、f11、f13；转换时间数据+最后10%验证+xgb：0.09028
- **结论：去掉训练集重复值、处理缺失值（删除样本+均值或众数填充）、onehot处理f2/f11/f13、转换时间数据**



## 3-23

- 线上：
  - [glqglqglq2]加入统计特征f1-ratio、f2-ratio、f19-ratio+最后一天验证+xgb：0.09280
  - [xieqixin]加入统计特征f1-ratio、f2-ratio、f19-ratio+最后一天验证+lgb：0.09071
- **结论：特征穿越了**



## 3-24

- 线下：
  - 预处理test；加入统计特征f1-ratio、f2-ratio、f19-ratio为点击日之前数据
- 线上：
  - [glqglqglq1]预处理test；修改统计特征f1-ratio、f2-ratio、f19-ratio为点击日之前数据+最后一天验证+lgb：0.08213-0.08287-205
  - [glqglqglq2]预处理test；删除统计特征+最后一天验证+lgb：0.08310-261
  - [post5862]预处理test；修改统计特征f1-ratio、f2-ratio、f19-ratio为点击日之前数据+最后一天验证+xgb：0.08808-0.08277-179
- **结论：用xgb而不用lgb；预处理test；加入统计特征f1-ratio、f2-ratio、f19-ratio为点击日之前数据**



## 3-25

- 线下：

  - 原始：0.082175
  - 前向加入单点击率：
    - 加f1：0.081868
    - 加f19：0.081896
    - 加f4：0.081994
    - 加f10：0.082076
    - 加f5：0.082191
  - **后向删除单点击率：**
    - **所有：0.08181**
    - **缺f5：0.081839**
    - **缺f4：0.081857**
    - **缺f19：0.08186**
    - **缺f1：0.081886**
    - **缺f10：0.081924**
  - **加入双点击率：**
    - **所有：0.081792**
    - **缺f4-f5：0.081854**
    - **缺f1-f4：0.081894**
    - **缺f1-f5：0.081894**
    - **缺f4-f19：0.081894**
    - **缺f5-f19：0.081894**
  - 加入单购买量：
    - 缺f1：0.081856
    - 缺f5：0.08195
    - 所有：0.081957
    - 缺f10：0.081964
    - 缺f19：0.081979
    - 缺f4：0.082016
    - 缺f1、f5：
  - 加入双购买量：0.081922
  - 加入单浏览量：
    - 缺f4：0.08183
    - 缺f10：0.081847
    - 缺f5：0.081856
    - 缺f1：0.081864
    - 所有：0.08188
    - 缺f19：0.081883
  - 加入双浏览量：0.081943
    - 缺f4-f5：0.081909
    - 所有：0.081943
    - 缺f1-f4：0.081945
    - 缺f1-f5：0.081945
    - 缺f4-f19：0.081945
    - 缺f5-f19：0.081945

- 线上：

  - [glqglqglq1]加入组合点击率、单/组合点击量统计特征+最后一天验证+xgb：0.081995-0.08268-339
  - [post5862]加入单/组合点击率统计特征+最后一天验证+lgb：0.0821183-0.08285-375
  - [glqglqglq3]加入单/组合点击率、单点击量统计特征+最后一天验证+lgb：0.0822178-0.08296-481
  - [glqglqglq2]加入单/组合点击率、单/组合点击量统计特征+最后一天验证+lgb：0.0822684-0.08296-485



  ​

## 3-26

- 线下：
- 线上：
  - [glqglqglq1]加入单/组合浏览量特征+17-23训练、24验证+xgb：0.081756-0.08268-379
  - [post5862]加入单/组合浏览量特征+18-23训练、24验证+xgb：0.081756-0.08268-379
  - [glqglqglq2]加入单/组合浏览量特征+17-22训练、23验证+xgb：0.083378-0.08280-440
  - [glqglqglq3]加入单/组合浏览量特征+18-22训练、23验证+xgb：0.083378-0.08280-440
  
- **结论：lbg线上线下差0.0006，xgb线上线下差0.0007，只用购买率特征**



## 3-29

- 线下：
  - 将统计特征改为1天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.082102-0.08206-0.082119
  - 将统计特征改为3天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.081958-0.082-0.081913
  - 将统计特征改为4天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081953
  - 将统计特征改为5天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.081898-0.081783-0.081911
  - 将统计特征改为6天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081879
  - 将统计特征改为7天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.081883-0.081883-0.081935



  - 将统计特征改为1、5天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081883
  - 将统计特征改为5、7天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081894
  - 将统计特征改为3、5天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081923
  - 将统计特征改为3、7天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.081977
  - 将统计特征改为1、3天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.81986
  - 将统计特征改为1、7天滑窗并去掉少于2个值的变量；无embedding+17-23训练、24验证+xgb：0.082008



  - 将统计特征改为1、3、5、7天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.081994-0.081863-0.081953



  - 将统计特征改为所有天滑窗并去掉少于1、2、3个值的变量；无embedding+17-23训练、24验证+xgb：0.081923-0.08189-0.081938

- 线上：
  - [post5862]
  - [glqglqglq1]滑动窗口设置为5天；不用embedding+17-23训练、24验证+xgb0.081792-0.08569
  - [glqglqglq2]
  - [glqglqglq3]

- **结论：滑动窗口设置为5天或7天；删除小于2个值的新特征；不用doc2vec的embedding！**



## 3-31

- 线下：
  - 滑动窗口五折交叉验证：0.085155，不降反升，但是的确训练220轮左右即可
  - 加入贝叶斯平滑：
- 线上：
  - 加入贝叶斯平滑：？-0.08292
  - 不加入贝叶斯平滑保持原样：0.081792-0.08268
- **结论：不加入贝叶斯平滑**

## 4-7

- 线下：
  - 加入行为前一小时的浏览量：0.081373
  - 加入放f3-f18-jaccard：0.08176
  - 加入放f3-f18-jaccard、加入行为前一小时的浏览量：0.081323
- 线上：
  - [glqglqglq1]加入行为前一小时的浏览量：0.081373-0.08210
  - [glqglqglq2]加入放f3-f18-jaccard：0.08176-0.08243
  - [glqglqglq3]加入放f3-f18-jaccard、加入行为前一小时的浏览量：0.081323-0.08195
- **结论：加入jaccard相似度、行为前一小时的浏览量**

## 4-8

- 线下：
  - 将行为前一小时的浏览量改为行为前半小时的浏览量：0.081389
- 线上：
  - [glqglqglq3]将行为前一小时的浏览量改为行为前半小时的浏览量：0.081389-0.08240
- **结论：用行为前一小时的浏览量**

## 4-10

- 线下：
  - 加入展示、收藏、销量之间的比例：0.081212
  - 加入到这次浏览的时间间隔：0.08108
  - 加入上次浏览的时间：0.081125
  - 加入当天是否是第一次、最后一次浏览：0.079665
- 线上：
  - [glqglqglq1]加入展示、收藏、销量之间的比例：0.081212-0.08193
  - [glqglqglq2]加入到这次浏览的时间间隔：0.08108-0.08214
  - [glqglqglq3]加入上次浏览的时间：0.081125-0.08238
  - [post5862]加入今天是否是第一次、最后一次浏览：0.079665-0.08174 
- **结论：展示收藏销量之间的比例、今天是否第一次最后一次浏览有效**




## 4-11

- 线下：

  - 加入当天浏览量：0.079919

  - 加入当小时浏览量：0.079997

    ​

- 线上：

  - 加入当天浏览量：0.079919
  - 加入当小时浏览量：0.079997

## 4-12

- 线下：
  - 改变时区为北京时间+所有统计特征：0.078968
  - 改变时区为北京时间+所有统计特征+删除buy-count：0.079055
  - 改变时区为北京时间+所有统计特征+删除browse-count：0.078905
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览：0.078958
- 线上：
  - 改变时区为北京时间+所有统计特征：0.078968-0.08181
  - 改变时区为北京时间+所有统计特征+删除buy-count：0.079055-0.08173
  - 改变时区为北京时间+所有统计特征+删除browse-count：0.078905-0.08215
  - **改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览：0.078958-0.08148**
- **结论：删除buy-count和这个小时是否是第一次、最后一次浏览**

## 4-13

- 线下：
  - 改变时区为北京时间+所有统计特征：0.079003

  - 改变时区为北京时间+所有统计特征+删除buy-count：0.078996

  - 改变时区为北京时间+所有统计特征+删除browse-count：0.079001

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览：0.078844-0.08148

    ​

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count：0.078978-

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count：0.079009-

    ​
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count：0.078964

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600：0.078937

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600：0.078937

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600；删除next-browse-time：0.078834-0.08152

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600；删除last-browse-time：0.078961

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600；删除next-browse-time；删除browse_count_today：0.07899

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count；删除buy-count；删除browse-count-hour-ago-3600；删除next-browse-time；删除browse_count_tohour：0.078894

- 线上：

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览：0.078844-0.08148
  - [glqglqglq1]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除browse-count：0.079009-0.08177
  - [glqglqglq2]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count：0.078978-0.08151
  - [glqglqglq3]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count：0.078964-0.08177
  - [post5862]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除browse-count-hour-ago-3600：0.078937-0.08186



## 4-15

- Baseline：
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count：0.078964-0.08177
- 线下：
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除next-browse-time：**0.078822**
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除last-browse-time：0.079046
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除next-browse-time：
- 线上：
  - [glqglqglq1]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除next-browse-time：**0.078822-0.08138**
  - [glqglqglq3]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除last-browse-time：0.079046-0.08168
  - [post5862]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除browse_count_today：0.079061-0.08155
  - [?]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除buy-count；删除browse-count；删除browse_count_tohour：0.079025-

## 4-16

- baseline：

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览：0.078844

- 线下：

  - [glqglqglq1]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time：0.07888-0.08131
  - [glqglqglq2]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除last-browse-time：0.079009-0.08123
  - [glqglqglq3]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time；删除last-browse-time：**0.078835-0.08101**
  - [post5862]改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time；删除last-browse-time；删除browse-count-hour-ago-3600：0.078799-0.08114

  ​

  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time；删除last-browse-time；删除browse_count_today：0.078872-
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time；删除last-browse-time；删除browse-count-hour-ago-3600；删除browse-count-today：0.078957
  - 改变时区为北京时间+所有统计特征+删除这个小时是否是第一次、最后一次浏览；删除next-browse-time；删除last-browse-time；删除browse-count-hour-ago-3600；删除browse-count-tohour：0.07892
  - ​